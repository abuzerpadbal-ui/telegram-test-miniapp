<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Testni Boshlash</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 15px; background: #f5f5f5; }
    h2 { text-align: center; }
    input, button, textarea { width: 100%; padding: 10px; margin: 6px 0; }
  </style>
</head>
<body>

<h2>üß™ Testni boshlash</h2>

<!-- 1-Bosqich: ism va familiya -->
<div id="userForm">
  <input id="userName" placeholder="Ismingiz va Familiyangiz">
  <button onclick="startTest()">‚û°Ô∏è Testni boshlash</button>
</div>

<!-- 2-Bosqich: test kodi -->
<div id="codeInput" style="display:none;">
  <input id="testCode" placeholder="Test kodini kiriting">
  <button onclick="sendCode()">‚úÖ Tasdiqlash</button>
</div>

<script>
Telegram.WebApp.ready();

let user = { role: "user", name: "", test_code: "" };

function startTest() {
  const name = document.getElementById("userName").value.trim();
  if(!name) return alert("Iltimos, ismingiz va familiyangizni kiriting");
  user.name = name;

  document.getElementById("userForm").style.display = "none";
  document.getElementById("codeInput").style.display = "block";
}

function sendCode() {
  const code = document.getElementById("testCode").value.trim();
  if(!code) return alert("Iltimos, test kodini kiriting");
  user.test_code = code;

  Telegram.WebApp.sendData(JSON.stringify(user));
  Telegram.WebApp.close();
}
</script>

</body>
</html>
